---
export interface Props {
  title: string;
  subtitle?: string;
  ctaText?: string;
  ctaLink?: string;
  imageUrl: string; // already transformed for speed
  widths?: number[]; // optional custom widths
}
const {
  title,
  subtitle,
  ctaText = "Learn more",
  ctaLink = "/",
  imageUrl,
  widths = [640, 1024, 1600, 2200],
} = Astro.props;

function srcset(url: string, ws: number[]) {
  // Append Cloudinary params as query params
  return ws
    .map(
      (w) => `${url}${url.includes("?") ? "&" : "?"}w=${w}&dpr=auto ${w}w`
    )
    .join(", ");
}
---

<section class="relative overflow-hidden">
  <div class="mx-auto max-w-6xl px-4 py-10 grid gap-8 md:grid-cols-2 items-center">
    <div>
      <h1 class="text-5xl md:text-6xl font-light tracking-tight leading-tight">{title}</h1>
      {subtitle && <p class="mt-4 text-lg text-neutral-600">{subtitle}</p>}
      {ctaText && (
        <a href={ctaLink} class="inline-block mt-6 rounded-xl px-6 py-3 border border-neutral-300 hover:bg-neutral-50  hover:text-black transition">
          {ctaText}
        </a>
      )}
    </div>
    <div class="relative">
      <img
        src={imageUrl}
        srcset={srcset(imageUrl, widths)}
        sizes="(max-width: 900px) 100vw, 48vw"
        alt=""
        width="1600"
        height="1000"
        fetchpriority="high"
        decoding="async"
        class="w-full h-auto rounded-2xl object-cover shadow-sm"
      />
    </div>
  </div>
</section>
